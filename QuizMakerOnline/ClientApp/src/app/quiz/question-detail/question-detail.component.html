<div *ngIf="question" class="questionDetail">
  <mat-expansion-panel [expanded]='question.question.trim() != "" || question.id_question_type == 2'>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Otázka
      </mat-panel-title>
      <mat-panel-description>
        <span class="infoItem">{{question.enter_date | date:'mediumDate'}}</span><span class="infoItemSeparator"></span>
        <mat-icon inline>person</mat-icon><span class="infoItem">{{relatedLists.allUsers[question.id_user]}}</span><span class="infoItemSeparator"></span>
        <mat-icon inline>{{question.id_question_type == 2 ? "remove" : "list"}}</mat-icon><span class="infoItem">{{relatedLists.questionTypes[question.id_question_type]}}</span><span class="infoItemSeparator"></span>
        <mat-icon inline>{{question.id_question_difficulty == 1 ? "star_border" : (question.id_question_difficulty == 2 ? "star_half" : "star")}}</mat-icon><span class="infoItem">{{relatedLists.questionDifficulties[question.id_question_difficulty]}}</span><span class="infoItemSeparator"></span>
        <mat-icon inline>{{question.state == 0 ? "warning" : (question.state == 1 ? "done" : "pan_tool")}}</mat-icon><span class="infoItem">{{relatedLists.questionState[question.state]}}</span><span class="infoItemSeparator"></span>
        <span class="infoItem">id: {{question.id_question}}</span>
      </mat-panel-description>
    </mat-expansion-panel-header>
    <mathjax [content]='question.question'></mathjax>
    <div class="points">({{question.points}} {{question.points == 1 ? "bod" : (question.points < 5 && question.points > 0 ? "body" : "bodů")}})</div>

    <button mat-stroked-button color="primary" (click)="editQuestion(false)" matTooltip="Upravit otázku" [disabled]="!question.canEdit">
      <mat-icon>edit</mat-icon>
    </button>

    <button mat-stroked-button color="primary" (click)="questionHistory()" matTooltip="Historie použití" style="margin-left: 6px;">
      <mat-icon>history</mat-icon>
    </button>

    <button mat-stroked-button color="primary" (click)="questionsComponent.copyQuestion()" matTooltip="Vytvořit kopii otázky" style="margin-left: 6px;" [disabled]="!questionsComponent.testRight(2)">
      <mat-icon>file_copy</mat-icon>
    </button>

    <button mat-stroked-button color="warn" (click)="delQuestion()" matTooltip="Smazat otázku" style="margin-left: 6px;" [disabled]="!question.canEdit">
      <mat-icon>delete_forever</mat-icon>
    </button>

  </mat-expansion-panel>

  <mat-expansion-panel *ngIf="question.id_question_type!=2" [expanded]='question.id_question_type!=2'>
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{ question.id_question_type==1 ? "Odpovědi" : "Podtázky"}}
      </mat-panel-title>
    </mat-expansion-panel-header>
    <div *ngFor="let answer of question.answers; let i = index" class="answer">
      <mathjax [content]='"\\textbf{" + answer.position + ")} " + answer.answer'></mathjax>
      <div *ngIf="question.id_question_type != 1" class="points">({{answer.points}} {{answer.points == 1 ? "bod" : (answer.points < 5 && answer.points > 0 ? "body" : "bodů")}})</div>

      <div fxLayout class="answer_tools" [class.answer_tools_test]="question.id_question_type == 1">
        <div fxFlex fxLayoutAlign="center center">
          <button mat-mini-fab color="primary" (click)="editAnswer(answer)" matTooltip='Upravit {{ question.id_question_type==1 ? "odpověď" : "podtázku"}}' class="answerActionButton" [disabled]="!question.canEdit">
            <mat-icon>edit</mat-icon>
          </button>

          <button mat-mini-fab color="primary" (click)="moveAnswer(answer, 1)" matTooltip="Posunout dolů" class="answerActionButton" [disabled]="!question.canEdit || i==question.answers.length-1">
            <mat-icon>arrow_downward</mat-icon>
          </button>

          <button mat-mini-fab color="primary" (click)="moveAnswer(answer, -1)" matTooltip="Posunout nahoru" class="answerActionButton" [disabled]="!question.canEdit || i==0">
            <mat-icon>arrow_upward</mat-icon>
          </button>

          <button mat-mini-fab color="warn" (click)="delAnswer(answer)" matTooltip='Smazat {{ question.id_question_type==1 ? "odpověď" : "podtázku"}}' class="answerActionButton" [disabled]="!question.canEdit">
            <mat-icon>delete_forever</mat-icon>
          </button>

        </div>
      </div>

    </div>
    <div style="margin-top:10px">
      <button (click)="addAnswer()" mat-stroked-button color="accent" matTooltip='Přidat {{ question.id_question_type==1 ? "odpověď" : "podtázku"}}' [disabled]="!question.canEdit">
        <mat-icon>add</mat-icon>
      </button>&nbsp;
    </div>
  </mat-expansion-panel>


  <mat-expansion-panel [expanded]='question.solution.trim() != ""'>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Řešení
      </mat-panel-title>
    </mat-expansion-panel-header>
    <mathjax [content]='question.solution'></mathjax>
    <button mat-stroked-button color="primary" (click)="editQuestion(true)" matTooltip="Upravit řešení" style="margin-top:10px" [disabled]="!question.canEdit">
      <mat-icon>edit</mat-icon>
    </button>
    <div *ngIf="question.id_question_type==1" style="margin-top:10px">
      Správná odpověď: {{question.right_answer}})
    </div>
  </mat-expansion-panel>

</div>
